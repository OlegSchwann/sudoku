<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Судоку</title>
    <style>
        main{
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        table {
            border-collapse: collapse;
        }

        table.sudoku-regions {
            border: 1px solid #424242;

        }

        table.sudoku-regions tbody {
            display: inline-block;
            padding: 1px;
        }

        table.sudoku-cells tbody {
            display: inline-block;
            padding: 0;
        }

        table.sudoku-cells th {
            border: 1px solid #757575;
        }

        table.sudoku-cells input {
            border: none;
            background-color: inherit;
            height: 1.6rem;
            width: 1.6rem;
            padding: 0;
            margin: 0;
            font-size: 1.5rem;
            text-align: center;
        }

        /* когда курсор находится над клеткой то правила подсвечиваются
        #fafafa для группы
        #f5f5f5 для строки
        #eeeeee для непосредственно выбранного*/

        table.sudoku-regions th:hover {
            background-color: #f8f8f8;
        }

        table.sudoku-cells th:hover {
            background-color: #f0f0f0;
        }

        .neighbor_cell{
            border: 1px solid crimson;
            background-color: crimson;
        }
    </style>
</head>
<body>
<main>
    <div><h3>Судоку</h3></div>
    <div class="sudoku-field">
        <!--id указывают координаты x→, y↓, -->
        <table class="sudoku-regions">
            <tbody>
            <tr>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_0_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 0, this.value);"></th>
                            <th><input id="c_1_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 0, this.value);"></th>
                            <th><input id="c_2_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 0, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_0_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 1, this.value);"></th>
                            <th><input id="c_1_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 1, this.value);"></th>
                            <th><input id="c_2_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 1, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_0_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 2, this.value);"></th>
                            <th><input id="c_1_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 2, this.value);"></th>
                            <th><input id="c_2_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 2, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_3_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 0, this.value);"></th>
                            <th><input id="c_4_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 0, this.value);"></th>
                            <th><input id="c_5_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 0, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_3_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 1, this.value);"></th>
                            <th><input id="c_4_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 1, this.value);"></th>
                            <th><input id="c_5_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 1, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_3_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 2, this.value);"></th>
                            <th><input id="c_4_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 2, this.value);"></th>
                            <th><input id="c_5_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 2, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_6_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 0, this.value);"></th>
                            <th><input id="c_7_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 0, this.value);"></th>
                            <th><input id="c_8_0" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 0, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_6_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 1, this.value);"></th>
                            <th><input id="c_7_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 1, this.value);"></th>
                            <th><input id="c_8_1" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 1, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_6_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 2, this.value);"></th>
                            <th><input id="c_7_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 2, this.value);"></th>
                            <th><input id="c_8_2" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 2, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
            </tr>
            <tr>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_0_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 3, this.value);"></th>
                            <th><input id="c_1_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 3, this.value);"></th>
                            <th><input id="c_2_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 3, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_0_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 4, this.value);"></th>
                            <th><input id="c_1_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 4, this.value);"></th>
                            <th><input id="c_2_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 4, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_0_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 5, this.value);"></th>
                            <th><input id="c_1_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 5, this.value);"></th>
                            <th><input id="c_2_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 5, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_3_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 3, this.value);"></th>
                            <th><input id="c_4_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 3, this.value);"></th>
                            <th><input id="c_5_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 3, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_3_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 4, this.value);"></th>
                            <th><input id="c_4_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 4, this.value);"></th>
                            <th><input id="c_5_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 4, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_3_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 5, this.value);"></th>
                            <th><input id="c_4_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 5, this.value);"></th>
                            <th><input id="c_5_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 5, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_6_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 3, this.value);"></th>
                            <th><input id="c_7_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 3, this.value);"></th>
                            <th><input id="c_8_3" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 3, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_6_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 4, this.value);"></th>
                            <th><input id="c_7_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 4, this.value);"></th>
                            <th><input id="c_8_4" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 4, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_6_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 5, this.value);"></th>
                            <th><input id="c_7_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 5, this.value);"></th>
                            <th><input id="c_8_5" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 5, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
            </tr>
            <tr>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_0_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 6, this.value);"></th>
                            <th><input id="c_1_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 6, this.value);"></th>
                            <th><input id="c_2_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 6, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_0_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 7, this.value);"></th>
                            <th><input id="c_1_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 7, this.value);"></th>
                            <th><input id="c_2_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 7, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_0_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(0, 8, this.value);"></th>
                            <th><input id="c_1_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(1, 8, this.value);"></th>
                            <th><input id="c_2_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(2, 8, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_3_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 6, this.value);"></th>
                            <th><input id="c_4_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 6, this.value);"></th>
                            <th><input id="c_5_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 6, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_3_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 7, this.value);"></th>
                            <th><input id="c_4_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 7, this.value);"></th>
                            <th><input id="c_5_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 7, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_3_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(3, 8, this.value);"></th>
                            <th><input id="c_4_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(4, 8, this.value);"></th>
                            <th><input id="c_5_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(5, 8, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
                <th>
                    <table class="sudoku-cells">
                        <tbody>
                        <tr>
                            <th><input id="c_6_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 6, this.value);"></th>
                            <th><input id="c_7_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 6, this.value);"></th>
                            <th><input id="c_8_6" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 6, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_6_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 7, this.value);"></th>
                            <th><input id="c_7_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 7, this.value);"></th>
                            <th><input id="c_8_7" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 7, this.value);"></th>
                        </tr>
                        <tr>
                            <th><input id="c_6_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(6, 8, this.value);"></th>
                            <th><input id="c_7_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(7, 8, this.value);"></th>
                            <th><input id="c_8_8" type="text" pattern="^\d$"
                                       onchange="sudoku.update(8, 8, this.value);"></th>
                        </tr>
                        </tbody>
                    </table>
                </th>
            </tr>
            </tbody>
        </table>
    </div>
    <script>
        for (let x = 0; x < 9; ++x){
            for (let y = 0; y < 9; ++y){
                let cell = document.getElementById("c_"+x+"_"+y);
                let neighbors_ids  = [];
                for(let i = 0; i < x; ++i){
                    neighbors_ids.push("c_"+i+"_"+y);
                }
                for(let i = x+1; i < 9; ++i){
                    neighbors_ids.push("c_"+i+"_"+y);
                }
                for(let i = 0; i < y; ++i){
                    neighbors_ids.push("c_"+x+"_"+i);
                }
                for(let i = y+1; i < 9; ++i){
                    neighbors_ids.push("c_"+x+"_"+i);
                }
                cell.onmouseover = function (event) {
                    for (let i in neighbors_ids){
                        document.getElementById(neighbors_ids[i]).style.backgroundColor = "#f0f0f0";
                    }
                };
                cell.onmouseout = function (event) {
                    for (let i in neighbors_ids){
                        document.getElementById(neighbors_ids[i]).style.backgroundColor = "inherit";
                    }
                };
            }
        }
    </script>
    <script>
        "use strict";

        class Sudoku {
            constructor() {
                this.actual_field = [
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""],
                    ["", "", "", "", "", "", "", "", ""]
                ];
            }

            /*служебная фунуция, которая обнавляет поле, когда пользователь изменяет число в input*/
            update(x, y, value) {
                this.actual_field[x][y] = value;
                /*тут вызываем валидацию*/
            }

            /*обновляет в html представлении*/
            set_cell(x, y, value) {
                document.getElementById("c_" + x + "_" + y).value = value.toString();
                this.actual_field[x][y] = value.toString();
            }
        }

        let sudoku = new Sudoku();

    </script>
</main>

</body>
</html>
